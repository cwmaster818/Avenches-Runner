<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Avenches Runner Â· æœ¬åœ°è·‘è…¿å–é€æœåŠ¡</title>
<meta name="description" content="Avenches å‘¨è¾¹ 10 å…¬é‡Œè·‘è…¿/å–é€æœåŠ¡ Â· ä»·æ ¼è®¡ç®—å™¨ Â· åœ¨çº¿ä¸‹å• Â· Twint/Revolut æ”¯ä»˜">
<meta property="og:title" content="Avenches Runner Â· æœ¬åœ°è·‘è…¿å–é€æœåŠ¡">
<meta property="og:description" content="Avenches å‘¨è¾¹ 10 å…¬é‡Œè·‘è…¿/å–é€æœåŠ¡ Â· ä»·æ ¼è®¡ç®—å™¨ Â· åœ¨çº¿ä¸‹å• Â· Twint/Revolut æ”¯ä»˜">
<meta property="og:image" content="og-image.png">
<meta property="og:type" content="website">
<link rel="icon" type="image/png" href="favicon.png" />
<style>
:root{--bg:#ffffff;--fg:#111827;--muted:#6b7280;--border:#e5e7eb;--accent:#111827;--card:#f8fafc;}
*{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji';color:var(--fg);background:var(--bg)}
.container{max-width:1100px;margin:0 auto;padding:20px}
.header{position:sticky;top:0;background:rgba(255,255,255,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--border);z-index:10}
.row{display:grid;grid-template-columns:1fr;gap:20px}
@media(min-width:900px){.row-2{grid-template-columns:1fr 1fr}.row-3{grid-template-columns:1fr 1fr 1fr}}
.h1{font-weight:800;font-size:32px;line-height:1.2;margin:0}
.p{color:var(--muted);line-height:1.65}
.btn{display:inline-flex;align-items:center;justify-content:center;background:var(--accent);color:#fff;border-radius:12px;padding:12px 18px;text-decoration:none;font-weight:600;border:1px solid var(--accent)}
.badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:12px}
.card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.04)}
.card h3{margin:0 0 8px;font-size:18px}
.input,.select,.textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:#fff}
.textarea{min-height:84px}
.label{font-size:12px;color:var(--muted);margin-top:6px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:10px;border-top:1px solid var(--border);text-align:left}
.small{font-size:12px;color:var(--muted)}
.footer{border-top:1px solid var(--border);padding:16px 0;margin-top:40px;font-size:12px;color:var(--muted);display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap}
.langs button{border:1px solid var(--border);background:#fff;padding:6px 10px;border-radius:999px;font-size:13px;cursor:pointer}
.langs button.active{background:#111827;color:#fff;border-color:#111827}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
.modal .inner{background:#fff;border-radius:16px;max-width:420px;width:100%;padding:16px;border:1px solid var(--border)}
.modal .inner img{max-width:100%;height:auto;display:block;margin:8px auto;border:1px solid var(--border);border-radius:12px}
.modal .head{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.modal .close{border:none;background:#ef4444;color:#fff;border-radius:8px;padding:6px 10px;cursor:pointer}
.mapbox-note{font-size:11px;color:#6b7280}
.hr{height:1px;background:var(--border);margin:16px 0}
.mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace}
</style>
</head>
<body>
<header class="header">
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 20px">
    <div style="display:flex;align-items:center;gap:10px">
      <div style="height:36px;width:36px;border-radius:12px;background:#111827;color:#fff;display:flex;align-items:center;justify-content:center">ğŸ</div>
      <strong id="brand">Avenches Runner</strong>
      <span class="badge" id="badgeArea">Avenches Â· 10km</span>
    </div>
    <div class="langs">
      <button data-lang="zh" class="active">ä¸­æ–‡</button>
      <button data-lang="fr">FranÃ§ais</button>
      <button data-lang="de">Deutsch</button>
    </div>
  </div>
</header>

<main class="container">
  <section class="row row-2" style="align-items:center;margin-top:24px">
    <div>
      <h1 class="h1" id="heroTitle">Avenches è·‘è…¿ Â· æœ¬åœ°å–é€æœåŠ¡</h1>
      <p class="p" id="heroSubtitle">è¦†ç›– Avenches å‘¨è¾¹ 10 å…¬é‡Œï¼šæœºåœº/ç«è½¦ç«™/ä»“åº“å–é€ã€é¤é¥®/è¶…å¸‚ä»£è´­ã€æ–‡ä»¶ä»£åŠã€ä¸´æ—¶å¸®å¿™ã€‚çµæ´» Â· å¿«æ· Â· å¯é ã€‚</p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <a id="cta" class="btn" href="https://wa.me/41798888811?text=Bonjour%2C%20je%20souhaite%20un%20devis%20de%20course%2Flivraison%20%C3%A0%20Avenches.">WhatsApp å’¨è¯¢</a>
        <span class="badge" id="badgePay">ç°é‡‘ Â· Twint Â· Revolut</span>
      </div>
    </div>
    <div class="card" style="height:260px;display:flex;align-items:center;justify-content:center;font-size:64px;background:var(--card)">ğŸš´â€â™‚ï¸</div>
  </section>

  <section style="margin-top:24px">
    <h2 id="servicesTitle" style="margin-bottom:12px">æœåŠ¡é¡¹ç›®</h2>
    <div class="row row-3">
      <div class="card"><h3 id="svc1t">ğŸ“¦ å–é€/åŒåŸè·‘è…¿</h3><div class="p" id="svc1d">ç«è½¦ç«™/æœºåœº/ä»“åº“/é…’åº—/é—¨åº—ç­‰ï¼ŒæŒ‰æ—¶å–é€ï¼Œæœ‰å›¾å›æ‰§ã€‚</div></div>
      <div class="card"><h3 id="svc2t">ğŸ›’ ä»£ä¹°ä»£åŠ</h3><div class="p" id="svc2d">é¤é¥®ã€è¶…å¸‚ã€è¯åº—ã€å•†åº—è´­ç‰©ï¼›æ–‡ä»¶é€’äº¤ä¸ç®€å•ä»£åŠã€‚</div></div>
      <div class="card"><h3 id="svc3t">ğŸšš å®šåˆ¶ä¸ä¼ä¸š</h3><div class="p" id="svc3d">æŒ‰æ¬¡/æŒ‰æœˆå¥—é¤ï¼Œçº¿è·¯æ’ç¨‹ï¼Œç®€æ˜“ä»“å‚¨ä¸æœ¬åœ°äº¤æ¥æ”¯æŒã€‚</div></div>
    </div>
  </section>

  <section style="margin-top:24px">
    <h2 id="pricingCalcTitle" style="margin-bottom:8px">ä»·æ ¼è®¡ç®—å™¨</h2>
    <div class="row row-2">
      <div class="card">
        <div class="row">
          <label id="labKm">é‡Œç¨‹ (km) / Distance
            <input id="km" class="input" type="number" min="1" value="3">
          </label>
          <label id="labPerKm">æ¯å…¬é‡Œè´¹ç”¨ (åªè¯»)
            <input class="input" value="5" readonly>
          </label>
          <label id="labWait">ç­‰å¾…åˆ†é’Ÿ / Attente (min)
            <input id="wait" class="input" type="number" min="0" value="0">
          </label>
          <label style="display:flex;align-items:center;gap:8px"><input id="urgent" type="checkbox"> <span id="labUrgent">åŠ æ€¥ (+10)</span></label>
          <label style="display:flex;align-items:center;gap:8px"><input id="weekend" type="checkbox"> <span id="labWeekend">å‘¨æœ«/èŠ‚å‡ (+10)</span></label>
        </div>
        <div class="card" style="margin-top:10px;background:var(--card)">
          <div><span id="labBase">åŸºç¡€ä»·ï¼ˆå«3kmï¼‰</span>ï¼šCHF <span id="base">20.00</span></div>
          <div><span id="labExtraKm">é¢å¤–å…¬é‡Œ</span>ï¼š<span id="extraKm">0</span> Ã— CHF 5 = CHF <span id="extraKmFee">0.00</span></div>
          <div><span id="labWaitFee">ç­‰å¾…è´¹</span>ï¼šCHF <span id="waitFee">0.00</span></div>
          <div id="labSurch">é™„åŠ è´¹ï¼š<span id="labUrgS">åŠ æ€¥</span> CHF <span id="urgentFee">0</span>ï¼›<span id="labWkS">å‘¨æœ«</span> CHF <span id="weekendFee">0</span></div>
          <div class="label"><span id="labTotal">é¢„ä¼°æ€»ä»·</span> / Total: CHF <strong id="total">20.00</strong></div>
        </div>
      </div>
      <div class="card">
        <h3 id="orderTitle">åœ¨çº¿ä¸‹å• / Commande / Auftrag</h3>
        <div class="row">
          <input id="pickup" class="input" placeholder="å–ä»¶åœ°å€ / Adresse de retrait / Abholadresse">
          <input id="dropoff" class="input" placeholder="é€è¾¾åœ°å€ / Adresse de livraison / Lieferadresse">
          <input id="dt" class="input" type="datetime-local">
          <select id="size" class="select">
            <option>â‰¤15kg / â‰¤100cm</option>
            <option>15â€“25kg / â‰¤120cm</option>
            <option>å¤§ä»¶éœ€æ²Ÿé€š / Ã€ confirmer / Nach RÃ¼cksprache</option>
          </select>
          <div class="row row-2">
            <input id="name" class="input" placeholder="å§“å / Nom / Name">
            <input id="phone" class="input" placeholder="ç”µè¯/WhatsApp">
          </div>
          <input id="email" class="input" placeholder="é‚®ç®± E-mail">
          <textarea id="notes" class="textarea" placeholder="å¤‡æ³¨ / Remarques / Hinweise"></textarea>
          <label class="small" style="display:flex;gap:8px;align-items:flex-start">
            <input id="consent" type="checkbox" style="margin-top:3px">
            <span id="privacyText">æˆ‘åŒæ„ä¸ºä¸‹å•ä¹‹ç›®çš„å¤„ç†æˆ‘çš„è”ç³»ä¿¡æ¯ï¼ˆä»…ç”¨äºæœ¬æ¬¡æœåŠ¡è”ç³»ï¼Œä¸ç”¨äºå¹¿å‘Šï¼‰ã€‚</span>
          </label>
          <a id="sendBtn" class="btn" style="opacity:.5;pointer-events:none">é€šè¿‡ WhatsApp å‘é€è®¢å•</a>
          <div class="small" id="sendHint">ç‚¹å‡»åå°†æ‰“å¼€ WhatsAppï¼Œé¢„å¡«è®¢å•è¯¦æƒ…ã€‚éœ€å…ˆå‹¾é€‰éšç§åŒæ„å¹¶å¡«å†™é‚®ç®±ã€‚</div>
        </div>
      </div>
    </div>
  </section>

  <section style="margin-top:24px">
    <h2 id="pricingTitle">ä»·æ ¼ä¸èŒƒå›´</h2>
    <div class="card" style="overflow:auto">
      <table class="table">
        <thead><tr><th id="colItem">é¡¹ç›® / Item</th><th>CHF</th></tr></thead>
        <tbody>
          <tr><td id="itemBase">èµ·æ­¥ä»·ï¼ˆå«3kmï¼‰</td><td>20</td></tr>
          <tr><td id="itemKm">è¶…é‡Œç¨‹ï¼ˆ>3kmï¼Œæ¯å…¬é‡Œï¼‰</td><td>5</td></tr>
          <tr><td id="itemWait">ç­‰å¾…ï¼ˆè¶…10åˆ†é’Ÿ/æ¯åˆ†é’Ÿï¼‰</td><td>1</td></tr>
          <tr><td id="itemUrg">åŠ æ€¥</td><td>+10</td></tr>
          <tr><td id="itemWk">å‘¨æœ«/èŠ‚å‡</td><td>+10</td></tr>
        </tbody>
      </table>
      <div class="small" id="pricingNote" style="margin-top:6px">å¤‡æ³¨ï¼šä»·æ ¼ä»¥ç³»ç»Ÿä¼°ç®—ä¸ºå‚è€ƒï¼Œæœ€ç»ˆä»¥å®é™…è·ç¦»ä¸ç°åœºæƒ…å†µä¸ºå‡†ã€‚ä¼ä¸š/é•¿æœŸå®¢æˆ·å¯åå•†å¥—é¤ã€‚</div>
    </div>
  </section>

  <section style="margin-top:24px">
    <h2 id="mapTitle">æœåŠ¡èŒƒå›´åœ°å›¾ä¸è·ç¦»ä¼°ç®—</h2>
    <div class="small" id="mapNote">é€‰æ‹©å¸¸ç”¨ç›®çš„åœ°æˆ–è¾“å…¥ç»çº¬åº¦/åœ°å€ä¼°ç®—å…¬é‡Œæ•°ï¼ˆä»…ä¾›å‚è€ƒï¼‰ã€‚</div>
    <div class="row row-3" style="margin-top:10px">
      <div class="card">
        <div class="label" id="mapPickup">èµ·ç‚¹ï¼šAvenchesï¼ˆå›ºå®šï¼‰ Â· 46.8809, 7.0410</div>
        <label id="mapCommonLab">å¸¸ç”¨ç›®çš„åœ°
          <select id="common" class="select">
            <option value="">â€”</option>
          </select>
        </label>
        <div class="label" id="mapManual">æˆ–æ‰‹åŠ¨è¾“å…¥åæ ‡</div>
        <div class="row row-2">
          <input id="lat" class="input" placeholder="çº¬åº¦">
          <input id="lon" class="input" placeholder="ç»åº¦">
        </div>
        <div class="hr"></div>
        <div class="label" id="addrLab">åœ°å€ï¼ˆå¯é€‰ï¼Œç”¨äºè‡ªåŠ¨åœ°ç†ç¼–ç ï¼‰</div>
        <input id="addr" class="input" placeholder="åœ°å€ / Adresse / Adresse">
        <input id="mbToken" class="input mono" placeholder="Mapbox Access Tokenï¼ˆæµè§ˆå™¨æœ¬åœ°ä¿å­˜ï¼‰">
        <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap">
          <button id="geocode" class="btn" type="button">åœ°å€â†’ç»çº¬åº¦</button>
          <button id="estimate" class="btn" type="button">ä¼°ç®—é‡Œç¨‹å¹¶å¡«å…¥è®¡ç®—å™¨</button>
        </div>
        <div class="label">KM â‰ˆ <span id="kmOut">â€”</span></div>
        <div class="hr"></div>
        <div class="label" id="myCommonLab">æˆ‘çš„å¸¸ç”¨ç›®çš„åœ°ï¼ˆæœ¬åœ°ä¿å­˜ï¼‰</div>
        <div class="row row-3">
          <input id="cLabel" class="input" placeholder="åç§°">
          <input id="cLat" class="input" placeholder="çº¬åº¦">
          <input id="cLon" class="input" placeholder="ç»åº¦">
        </div>
        <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
          <button id="addCustom" class="btn" type="button">æ·»åŠ </button>
          <div id="customTags" class="small"></div>
        </div>
      </div>
      <div class="card" style="grid-column:span 2;display:flex;align-items:center;justify-content:center;background:var(--card)">
        <svg viewBox="0 0 600 300" style="width:100%;height:auto">
          <rect x="0" y="0" width="600" height="300" fill="#f8fafc" stroke="#e5e7eb"/>
          <circle cx="200" cy="160" r="6" fill="#111827" />
          <text x="212" y="164" font-size="12" fill="#111827">Avenches</text>
          <circle id="destDot" cx="420" cy="120" r="6" fill="#ef4444" style="display:none"/>
          <text id="destTxt" x="432" y="124" font-size="12" fill="#ef4444" style="display:none">Dest</text>
          <line id="destLine" x1="200" y1="160" x2="420" y2="120" stroke="#9ca3af" stroke-dasharray="6 6" style="display:none"/>
        </svg>
      </div>
    </div>
  </section>

  <section style="margin-top:24px">
    <h2 id="payTitle">æ”¯ä»˜ / Paiement / Zahlung</h2>
    <div class="row row-3">
      <div class="card">
        <h3>Twint</h3>
        <p class="p" id="twintDesc">ä¸‹å•åå‘é€ Twint æ”¶æ¬¾äºŒç»´ç ï¼Œæˆ–ç°åœºæ‰«ç æ”¯ä»˜ã€‚</p>
        <button id="openTwint" class="btn" type="button">Twint æ‰«ç æ”¯ä»˜</button>
      </div>
      <div class="card">
        <h3>Revolut</h3>
        <p class="p" id="revDesc">æ”¯æŒ Revolut è½¬è´¦ï¼ˆ@wcai81ï¼‰ã€‚</p>
        <a class="btn" target="_blank" rel="noopener" href="https://revolut.me/wcai81" id="revBtn">å‰å¾€ Revolut æ”¯ä»˜</a>
      </div>
      <div class="card">
        <h3 id="cashTitle">ç°é‡‘</h3>
        <p class="p" id="cashDesc">ç°åœºç°é‡‘ä¹Ÿå¯ï¼Œæä¾›æ”¶æ®ã€‚</p>
      </div>
    </div>
  </section>

  <div class="footer">
    <span id="footerL">Â© <span id="yr"></span> Avenches Runner Â· æœ¬åœ°è·‘è…¿å–é€æœåŠ¡</span>
    <span id="footerR">Avenches Â· Payerne Â· Morat/Murten Â· Estavayer Â· Email: 42137237@qq.com</span>
  </div>
</main>

<!-- Twint Modal -->
<div id="twintModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="twintTitle">
  <div class="inner">
    <div class="head">
      <strong id="twintTitle">Twint æ”¶æ¬¾äºŒç»´ç ï¼ˆå ä½ï¼‰</strong>
      <button class="close" id="closeTwint">å…³é—­</button>
    </div>
    <div class="p" id="twintHint">è¯·å°†æ‚¨çš„æ”¶æ¬¾äºŒç»´ç å›¾ç‰‡å‘½åä¸º <code>twint-qr.png</code> å¹¶æ”¾åœ¨ä¸æœ¬é¡µé¢ç›¸åŒç›®å½•ï¼Œåˆ·æ–°åè¿™é‡Œå°†æ˜¾ç¤ºçœŸå®äºŒç»´ç ã€‚</div>
    <img id="twintQR" src="twint-qr.png" alt="Twint QR (placeholder)" onerror="this.src='twint-qr-placeholder.png'">
  </div>
</div>

<script>
// i18n dictionary
const I18N = {
  zh: {
    title: "Avenches Runner Â· æœ¬åœ°è·‘è…¿å–é€æœåŠ¡",
    ogt: "Avenches Runner Â· æœ¬åœ°è·‘è…¿å–é€æœåŠ¡",
    ogd: "Avenches å‘¨è¾¹ 10 å…¬é‡Œè·‘è…¿/å–é€æœåŠ¡ Â· ä»·æ ¼è®¡ç®—å™¨ Â· åœ¨çº¿ä¸‹å• Â· Twint/Revolut æ”¯ä»˜",
    heroTitle: "Avenches è·‘è…¿ Â· æœ¬åœ°å–é€æœåŠ¡",
    heroSubtitle: "è¦†ç›– Avenches å‘¨è¾¹ 10 å…¬é‡Œï¼šæœºåœº/ç«è½¦ç«™/ä»“åº“å–é€ã€é¤é¥®/è¶…å¸‚ä»£è´­ã€æ–‡ä»¶ä»£åŠã€ä¸´æ—¶å¸®å¿™ã€‚çµæ´» Â· å¿«æ· Â· å¯é ã€‚",
    cta: "WhatsApp å’¨è¯¢",
    badgePay: "ç°é‡‘ Â· Twint Â· Revolut",
    servicesTitle: "æœåŠ¡é¡¹ç›®",
    svc1t: "ğŸ“¦ å–é€/åŒåŸè·‘è…¿",
    svc1d: "ç«è½¦ç«™/æœºåœº/ä»“åº“/é…’åº—/é—¨åº—ç­‰ï¼ŒæŒ‰æ—¶å–é€ï¼Œæœ‰å›¾å›æ‰§ã€‚",
    svc2t: "ğŸ›’ ä»£ä¹°ä»£åŠ",
    svc2d: "é¤é¥®ã€è¶…å¸‚ã€è¯åº—ã€å•†åº—è´­ç‰©ï¼›æ–‡ä»¶é€’äº¤ä¸ç®€å•ä»£åŠã€‚",
    svc3t: "ğŸšš å®šåˆ¶ä¸ä¼ä¸š",
    svc3d: "æŒ‰æ¬¡/æŒ‰æœˆå¥—é¤ï¼Œçº¿è·¯æ’ç¨‹ï¼Œç®€æ˜“ä»“å‚¨ä¸æœ¬åœ°äº¤æ¥æ”¯æŒã€‚",
    pricingCalcTitle: "ä»·æ ¼è®¡ç®—å™¨",
    labKm: "é‡Œç¨‹ (km) / Distance",
    labPerKm: "æ¯å…¬é‡Œè´¹ç”¨ (åªè¯»)",
    labWait: "ç­‰å¾…åˆ†é’Ÿ / Attente (min)",
    labUrgent: "åŠ æ€¥ (+10)",
    labWeekend: "å‘¨æœ«/èŠ‚å‡ (+10)",
    labBase: "åŸºç¡€ä»·ï¼ˆå«3kmï¼‰",
    labExtraKm: "é¢å¤–å…¬é‡Œ",
    labWaitFee: "ç­‰å¾…è´¹",
    labSurch: "é™„åŠ è´¹ï¼š",
    labUrgS: "åŠ æ€¥",
    labWkS: "å‘¨æœ«",
    labTotal: "é¢„ä¼°æ€»ä»·",
    orderTitle: "åœ¨çº¿ä¸‹å• / Commande / Auftrag",
    privacyText: "æˆ‘åŒæ„ä¸ºä¸‹å•ä¹‹ç›®çš„å¤„ç†æˆ‘çš„è”ç³»ä¿¡æ¯ï¼ˆä»…ç”¨äºæœ¬æ¬¡æœåŠ¡è”ç³»ï¼Œä¸ç”¨äºå¹¿å‘Šï¼‰ã€‚",
    sendBtn: "é€šè¿‡ WhatsApp å‘é€è®¢å•",
    sendHint: "ç‚¹å‡»åå°†æ‰“å¼€ WhatsAppï¼Œé¢„å¡«è®¢å•è¯¦æƒ…ã€‚éœ€å…ˆå‹¾é€‰éšç§åŒæ„å¹¶å¡«å†™é‚®ç®±ã€‚",
    pricingTitle: "ä»·æ ¼ä¸èŒƒå›´",
    colItem: "é¡¹ç›® / Item",
    itemBase: "èµ·æ­¥ä»·ï¼ˆå«3kmï¼‰",
    itemKm: "è¶…é‡Œç¨‹ï¼ˆ>3kmï¼Œæ¯å…¬é‡Œï¼‰",
    itemWait: "ç­‰å¾…ï¼ˆè¶…10åˆ†é’Ÿ/æ¯åˆ†é’Ÿï¼‰",
    itemUrg: "åŠ æ€¥",
    itemWk: "å‘¨æœ«/èŠ‚å‡",
    pricingNote: "å¤‡æ³¨ï¼šä»·æ ¼ä»¥ç³»ç»Ÿä¼°ç®—ä¸ºå‚è€ƒï¼Œæœ€ç»ˆä»¥å®é™…è·ç¦»ä¸ç°åœºæƒ…å†µä¸ºå‡†ã€‚ä¼ä¸š/é•¿æœŸå®¢æˆ·å¯åå•†å¥—é¤ã€‚",
    mapTitle: "æœåŠ¡èŒƒå›´åœ°å›¾ä¸è·ç¦»ä¼°ç®—",
    mapNote: "é€‰æ‹©å¸¸ç”¨ç›®çš„åœ°æˆ–è¾“å…¥ç»çº¬åº¦/åœ°å€ä¼°ç®—å…¬é‡Œæ•°ï¼ˆä»…ä¾›å‚è€ƒï¼‰ã€‚",
    mapPickup: "èµ·ç‚¹ï¼šAvenchesï¼ˆå›ºå®šï¼‰ Â· 46.8809, 7.0410",
    mapCommonLab: "å¸¸ç”¨ç›®çš„åœ°",
    mapManual: "æˆ–æ‰‹åŠ¨è¾“å…¥åæ ‡",
    addrLab: "åœ°å€ï¼ˆå¯é€‰ï¼Œç”¨äºè‡ªåŠ¨åœ°ç†ç¼–ç ï¼‰",
    myCommonLab: "æˆ‘çš„å¸¸ç”¨ç›®çš„åœ°ï¼ˆæœ¬åœ°ä¿å­˜ï¼‰",
    payTitle: "æ”¯ä»˜ / Paiement / Zahlung",
    twintDesc: "ä¸‹å•åå‘é€ Twint æ”¶æ¬¾äºŒç»´ç ï¼Œæˆ–ç°åœºæ‰«ç æ”¯ä»˜ã€‚",
    revDesc: "æ”¯æŒ Revolut è½¬è´¦ï¼ˆ@wcai81ï¼‰ã€‚",
    cashTitle: "ç°é‡‘",
    cashDesc: "ç°åœºç°é‡‘ä¹Ÿå¯ï¼Œæä¾›æ”¶æ®ã€‚",
    footerL: "Â© {year} Avenches Runner Â· æœ¬åœ°è·‘è…¿å–é€æœåŠ¡",
    footerR: "Avenches Â· Payerne Â· Morat/Murten Â· Estavayer Â· Email: 42137237@qq.com",
    twintTitle: "Twint æ”¶æ¬¾äºŒç»´ç ï¼ˆå ä½ï¼‰",
    twintHint: "è¯·å°†æ‚¨çš„æ”¶æ¬¾äºŒç»´ç å›¾ç‰‡å‘½åä¸º twint-qr.png å¹¶æ”¾åœ¨ä¸æœ¬é¡µé¢ç›¸åŒç›®å½•ï¼Œåˆ·æ–°åè¿™é‡Œå°†æ˜¾ç¤ºçœŸå®äºŒç»´ç ã€‚"
  },
  fr: {
    title: "Avenches Runner Â· Courses & Livraisons locales",
    ogt: "Avenches Runner Â· Courses & Livraisons locales",
    ogd: "Zone 10 km autour dâ€™Avenches Â· Calculateur de prix Â· Commande WhatsApp Â· Paiement Twint/Revolut",
    heroTitle: "Avenches Runner Â· Courses & Livraisons locales",
    heroSubtitle: "Zone de 10 km autour dâ€™Avenches : aÃ©roport/gare/entrepÃ´t, achats & dÃ©marches, services ponctuels. Rapide Â· Flexible Â· Fiable.",
    cta: "Contacter via WhatsApp",
    badgePay: "EspÃ¨ces Â· Twint Â· Revolut",
    servicesTitle: "Prestations",
    svc1t: "ğŸ“¦ Retrait/Livraison locale",
    svc1d: "Gare/aÃ©roport/entrepÃ´t/hÃ´tel/magasin, preuve photo Ã  lâ€™arrivÃ©e.",
    svc2t: "ğŸ›’ Achats & DÃ©marches",
    svc2d: "Restauration, supermarchÃ©, pharmacie, dÃ©pÃ´t de documents, dÃ©marches simples.",
    svc3t: "ğŸšš Entreprises & Abonnements",
    svc3d: "Forfaits Ã  la course/au mois, tournÃ©es planifiÃ©es, microâ€‘stockage & handover local.",
    pricingCalcTitle: "Calculateur de prix",
    labKm: "Distance (km)",
    labPerKm: "Prix par km (lecture seule)",
    labWait: "Attente (min)",
    labUrgent: "Urgent (+10)",
    labWeekend: "Weekâ€‘end/Jours fÃ©riÃ©s (+10)",
    labBase: "Prix de base (â‰¤3 km)",
    labExtraKm: "Km supplÃ©mentaires",
    labWaitFee: "Frais d'attente",
    labSurch: "SupplÃ©ments :",
    labUrgS: "Urgent",
    labWkS: "Weekâ€‘end",
    labTotal: "Total estimÃ©",
    orderTitle: "Commande en ligne",
    privacyText: "J'accepte le traitement de mes donnÃ©es de contact uniquement pour cette commande (pas de publicitÃ©).",
    sendBtn: "Envoyer la commande via WhatsApp",
    sendHint: "WhatsApp sâ€™ouvrira avec les dÃ©tails prÃ©remplis. Cochez le consentement et indiquez un eâ€‘mail.",
    pricingTitle: "Tarifs & Zone",
    colItem: "Poste / Item",
    itemBase: "Prix de base (â‰¤3 km)",
    itemKm: "Auâ€‘delÃ  de 3 km (par km)",
    itemWait: "Attente (auâ€‘delÃ  de 10 min / par min)",
    itemUrg: "Urgent",
    itemWk: "Weekâ€‘end/Jours fÃ©riÃ©s",
    pricingNote: "Indications Ã  titre estimatif. Tarif final selon distance rÃ©elle et conditions. Forfaits pour clients rÃ©guliers/entreprises.",
    mapTitle: "Carte & estimation de distance",
    mapNote: "Choisissez une destination ou saisissez des coordonnÃ©es/adresse (indicatif).",
    mapPickup: "DÃ©part : Avenches (fixe) Â· 46.8809, 7.0410",
    mapCommonLab: "Destinations courantes",
    mapManual: "ou coordonnÃ©es manuelles",
    addrLab: "Adresse (facultatif, gÃ©ocodage automatique)",
    myCommonLab: "Mes destinations courantes (local)",
    payTitle: "Paiement",
    twintDesc: "QR Twint envoyÃ© aprÃ¨s validation, ou paiement sur place.",
    revDesc: "Paiement Revolut acceptÃ© (@wcai81).",
    cashTitle: "EspÃ¨ces",
    cashDesc: "Paiement en espÃ¨ces possible. ReÃ§u sur demande.",
    footerL: "Â© {year} Avenches Runner Â· Courses locales",
    footerR: "Avenches Â· Payerne Â· Morat/Murten Â· Estavayer Â· Email : 42137237@qq.com",
    twintTitle: "QR de paiement Twint (exemple)",
    twintHint: "Placez votre QR sous le nom twint-qr.png au mÃªme emplacement que cette page."
  },
  de: {
    title: "Avenches Runner Â· Lokaler Botendienst",
    ogt: "Avenches Runner Â· Lokaler Botendienst",
    ogd: "10â€‘kmâ€‘Zone um Avenches Â· Preisrechner Â· WhatsAppâ€‘Auftrag Â· Twint/Revolut",
    heroTitle: "Avenches Runner Â· Lokaler Botendienst",
    heroSubtitle: "10â€‘kmâ€‘Radius um Avenches: Flughafen/Bahnhof/Lager, EinkÃ¤ufe & BehÃ¶rdengÃ¤nge, spontane Hilfe. Schnell Â· Flexibel Â· ZuverlÃ¤ssig.",
    cta: "Per WhatsApp kontaktieren",
    badgePay: "Bar Â· Twint Â· Revolut",
    servicesTitle: "Leistungen",
    svc1t: "ğŸ“¦ Abholung & Zustellung",
    svc1d: "Bahnhof/Flughafen/Lager/Hotel/Shop â€“ mit Fotobeleg bei Zustellung.",
    svc2t: "ğŸ›’ EinkÃ¤ufe & Erledigungen",
    svc2d: "Gastronomie, Supermarkt, Apotheke; Dokumentenabgabe, einfache AmtsgÃ¤nge.",
    svc3t: "ğŸšš Firmen & Abos",
    svc3d: "Pro Auftrag/Monat, Tourenplanung, Microâ€‘Lager & lokaler Handover.",
    pricingCalcTitle: "Preisrechner",
    labKm: "Distanz (km)",
    labPerKm: "Preis pro km (nur lesen)",
    labWait: "Wartezeit (Min)",
    labUrgent: "Express (+10)",
    labWeekend: "Wochenende/Feiertag (+10)",
    labBase: "Grundpreis (â‰¤3 km)",
    labExtraKm: "ZusÃ¤tzliche km",
    labWaitFee: "WartegebÃ¼hr",
    labSurch: "ZuschlÃ¤ge:",
    labUrgS: "Express",
    labWkS: "Wochenende",
    labTotal: "Summe (geschÃ¤tzt)",
    orderTitle: "Onlineâ€‘Auftrag",
    privacyText: "Ich stimme der Verarbeitung meiner Kontaktdaten nur zur Auftragsabwicklung zu (keine Werbung).",
    sendBtn: "Bestellung via WhatsApp senden",
    sendHint: "WhatsApp Ã¶ffnet sich mit vorausgefÃ¼llten Angaben. Zustimmung & Eâ€‘Mail erforderlich.",
    pricingTitle: "Preise & Gebiet",
    colItem: "Posten / Item",
    itemBase: "Grundpreis (â‰¤3 km)",
    itemKm: "Ãœber 3 km (pro km)",
    itemWait: "Warten (Ã¼ber 10 Min / pro Min)",
    itemUrg: "Express",
    itemWk: "Wochenende/Feiertag",
    pricingNote: "Angaben unverbindlich. Endpreis nach realer Distanz & Situation. Firmen/Stammkunden: RahmenvertrÃ¤ge mÃ¶glich.",
    mapTitle: "Karte & DistanzschÃ¤tzung",
    mapNote: "Ziel wÃ¤hlen oder Koordinaten/Adresse eingeben (indikativ).",
    mapPickup: "Start: Avenches (fix) Â· 46.8809, 7.0410",
    mapCommonLab: "HÃ¤ufige Ziele",
    mapManual: "oder manuelle Koordinaten",
    addrLab: "Adresse (optional, automatische Geokodierung)",
    myCommonLab: "Meine hÃ¤ufigen Ziele (lokal)",
    payTitle: "Zahlung",
    twintDesc: "Twintâ€‘QR nach BestÃ¤tigung oder vor Ort.",
    revDesc: "Revolutâ€‘Zahlung unterstÃ¼tzt (@wcai81).",
    cashTitle: "Bar",
    cashDesc: "Barzahlung mÃ¶glich. Quittung auf Wunsch.",
    footerL: "Â© {year} Avenches Runner Â· Botendienst",
    footerR: "Avenches Â· Payerne Â· Murten/Morat Â· Estavayer Â· Eâ€‘Mail: 42137237@qq.com",
    twintTitle: "Twintâ€‘QR (Platzhalter)",
    twintHint: "Legen Sie Ihren QR als twint-qr.png im gleichen Ordner wie diese Seite ab."
  }
};

// Utility to set text
function T(id, key, lang){
  const el = document.getElementById(id);
  if(!el) return;
  const txt = I18N[lang][key];
  if(typeof txt === 'string'){
    if(key==='title'){
      document.title = txt;
      const ogt = document.querySelector('meta[property=\"og:title\"]');
      const ogd = document.querySelector('meta[property=\"og:description\"]');
      if(ogt) ogt.setAttribute('content', I18N[lang].ogt);
      if(ogd) ogd.setAttribute('content', I18N[lang].ogd);
    } else {
      el.textContent = txt.replace('{year}', new Date().getFullYear());
    }
  }
}

// Populate language
function applyLang(lang){
  T('heroTitle','heroTitle',lang);
  T('heroSubtitle','heroSubtitle',lang);
  T('cta','cta',lang);
  T('badgePay','badgePay',lang);
  T('servicesTitle','servicesTitle',lang);
  T('svc1t','svc1t',lang); T('svc1d','svc1d',lang);
  T('svc2t','svc2t',lang); T('svc2d','svc2d',lang);
  T('svc3t','svc3t',lang); T('svc3d','svc3d',lang);
  T('pricingCalcTitle','pricingCalcTitle',lang);
  T('labKm','labKm',lang); T('labPerKm','labPerKm',lang); T('labWait','labWait',lang);
  T('labUrgent','labUrgent',lang); T('labWeekend','labWeekend',lang);
  T('labBase','labBase',lang); T('labExtraKm','labExtraKm',lang); T('labWaitFee','labWaitFee',lang);
  T('labSurch','labSurch',lang); T('labUrgS','labUrgS',lang); T('labWkS','labWkS',lang);
  T('labTotal','labTotal',lang);
  T('orderTitle','orderTitle',lang); T('privacyText','privacyText',lang);
  T('sendBtn','sendBtn',lang); T('sendHint','sendHint',lang);
  T('pricingTitle','pricingTitle',lang); T('colItem','colItem',lang);
  T('itemBase','itemBase',lang); T('itemKm','itemKm',lang); T('itemWait','itemWait',lang);
  T('itemUrg','itemUrg',lang); T('itemWk','itemWk',lang); T('pricingNote','pricingNote',lang);
  T('mapTitle','mapTitle',lang); T('mapNote','mapNote',lang);
  T('mapPickup','mapPickup',lang); T('mapCommonLab','mapCommonLab',lang); T('mapManual','mapManual',lang);
  T('addrLab','addrLab',lang); T('myCommonLab','myCommonLab',lang);
  T('payTitle','payTitle',lang); T('twintDesc','twintDesc',lang);
  T('revDesc','revDesc',lang); T('cashTitle','cashTitle',lang); T('cashDesc','cashDesc',lang);
  T('footerL','footerL',lang); T('footerR','footerR',lang);
  T('twintTitle','twintTitle',lang); T('twintHint','twintHint',lang);
  T('title','title',lang);
}

document.getElementById('yr').textContent = new Date().getFullYear();

// WhatsApp cta always points to your number
document.getElementById('cta').setAttribute('href','https://wa.me/41798888811');

// language toggles
document.querySelectorAll('.langs button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.langs button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    applyLang(btn.dataset.lang);
  });
});

applyLang('zh');

// Pricing calculator
const kmI = document.getElementById('km');
const waitI = document.getElementById('wait');
const urgentI = document.getElementById('urgent');
const weekendI = document.getElementById('weekend');
function recalc(){
  const base = 20;
  const perKm = 5;
  const km = Math.max(1, Number(kmI.value||0));
  const extraKm = Math.max(0, km - 3);
  const extraKmFee = extraKm * perKm;
  const wait = Math.max(0, Number(waitI.value||0));
  const waitFee = Math.max(0, wait - 10) * 1;
  const urgentFee = urgentI.checked ? 10 : 0;
  const weekendFee = weekendI.checked ? 10 : 0;
  const total = base + extraKmFee + waitFee + urgentFee + weekendFee;
  document.getElementById('extraKm').textContent = extraKm.toFixed(0);
  document.getElementById('extraKmFee').textContent = extraKmFee.toFixed(2);
  document.getElementById('waitFee').textContent = waitFee.toFixed(2);
  document.getElementById('urgentFee').textContent = urgentFee.toFixed(0);
  document.getElementById('weekendFee').textContent = weekendFee.toFixed(0);
  document.getElementById('total').textContent = total.toFixed(2);
}
[kmI, waitI, urgentI, weekendI].forEach(el=>el.addEventListener('input', recalc));
recalc();

// Order form
const pickup = document.getElementById('pickup');
const dropoff = document.getElementById('dropoff');
const dt = document.getElementById('dt');
const size = document.getElementById('size');
const nameI = document.getElementById('name');
const phoneI = document.getElementById('phone');
const emailI = document.getElementById('email');
const notesI = document.getElementById('notes');
const consentI = document.getElementById('consent');
const sendBtn = document.getElementById('sendBtn');

function updateSend(){
  const ok = pickup.value && dropoff.value && dt.value && nameI.value && phoneI.value && emailI.value && consentI.checked;
  sendBtn.style.opacity = ok ? '1' : '.5';
  sendBtn.style.pointerEvents = ok ? 'auto' : 'none';
  if(ok){
    const total = document.getElementById('total').textContent;
    const text = `Avenches Runner è®¢å•
å–ä»¶: ${pickup.value}
é€è¾¾: ${dropoff.value}
æ—¶é—´: ${dt.value}
ä½“ç§¯/é‡é‡: ${size.value}
é‡Œç¨‹: ${kmI.value} km
ç­‰å¾…: ${waitI.value} åˆ†é’Ÿ
åŠ æ€¥: ${urgentI.checked ? 'æ˜¯':'å¦'}
å‘¨æœ«/èŠ‚å‡: ${weekendI.checked ? 'æ˜¯':'å¦'}
æŠ¥ä»·(ä¼°ç®—): ${total} CHF
è”ç³»äºº: ${nameI.value}
ç”µè¯/WhatsApp: ${phoneI.value}
é‚®ç®±: ${emailI.value}
éšç§åŒæ„: ${consentI.checked ? 'å·²åŒæ„':'æœªåŒæ„'}
æ”¯ä»˜åå¥½: Revolut @wcai81 / Twint / Cash
å¤‡æ³¨: ${notesI.value}`;
    sendBtn.href = 'https://wa.me/41798888811?text=' + encodeURIComponent(text);
  }
}
[pickup,dropoff,dt,size,nameI,phoneI,emailI,notesI,consentI].forEach(el=>el.addEventListener('input', updateSend));
updateSend();

// Haversine
function haversineKm(a, b){
  const toRad = d => d*Math.PI/180;
  const R = 6371;
  const dLat = toRad(b.lat - a.lat);
  const dLon = toRad(b.lon - a.lon);
  const lat1 = toRad(a.lat);
  const lat2 = toRad(b.lat);
  const h = Math.sin(dLat/2)**2 + Math.cos(lat1)*Math.cos(lat2)*Math.sin(Math.abs(dLon)/2)**2;
  return 2*R*Math.asin(Math.sqrt(h));
}
const ORIGIN = { lat:46.8809, lon:7.0410 };
const PRESET = [
  { label:'Payerne', lat:46.8215, lon:6.9385 },
  { label:'Morat / Murten', lat:46.9287, lon:7.1170 },
  { label:'Estavayer-le-Lac', lat:46.8498, lon:6.8465 },
  { label:'Fribourg', lat:46.8065, lon:7.1619 },
  { label:'Lausanne', lat:46.5197, lon:6.6323 },
  { label:'Bern', lat:46.9481, lon:7.4474 },
  { label:'NeuchÃ¢tel', lat:46.9896, lon:6.9293 },
  { label:'Yverdon-les-Bains', lat:46.7785, lon:6.6412 },
  { label:'Neuenburg Ost (ç¤ºä¾‹ç‚¹)', lat:47.0000, lon:6.9500 },
  { label:'Biel/Bienne', lat:47.1375, lon:7.2468 }
];
const common = document.getElementById('common');
function loadCustom(){ try{ return JSON.parse(localStorage.getItem('ar_custom_dests')||'[]'); }catch{return []}}
function refreshCommon(){
  common.innerHTML = '<option value=\"\">â€”</option>';
  PRESET.concat(loadCustom()).forEach(d=>{
    const opt = document.createElement('option');
    opt.value = d.label; opt.textContent = d.label; opt.dataset.lat=d.lat; opt.dataset.lon=d.lon;
    common.appendChild(opt);
  });
}
refreshCommon();
const latI = document.getElementById('lat');
const lonI = document.getElementById('lon');
common.addEventListener('change',()=>{
  const opt = common.selectedOptions[0];
  if(!opt || !opt.dataset.lat) return;
  latI.value = opt.dataset.lat;
  lonI.value = opt.dataset.lon;
});

// Mapbox geocoding (optional)
const addrI = document.getElementById('addr');
const mbTokenI = document.getElementById('mbToken');
mbTokenI.value = localStorage.getItem('ar_mb_token')||'';
mbTokenI.addEventListener('input',()=>localStorage.setItem('ar_mb_token', mbTokenI.value));
document.getElementById('geocode').addEventListener('click', async ()=>{
  const addr = addrI.value.trim();
  const tok = mbTokenI.value.trim();
  if(!addr || !tok){ alert('è¯·å…ˆå¡«å†™åœ°å€ä¸ Mapbox Token'); return; }
  try{
    const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(addr)}.json?access_token=${tok}&limit=1`;
    const res = await fetch(url);
    const data = await res.json();
    const feat = data && data.features && data.features[0];
    if(feat && feat.center){
      const [lo, la] = feat.center;
      latI.value = la; lonI.value = lo;
    }else{
      alert('æœªæ‰¾åˆ°åœ°å€çš„åæ ‡');
    }
  }catch(e){ alert('åœ°ç†ç¼–ç å¤±è´¥'); }
});

// Estimate and inject KM
const destDot = document.getElementById('destDot');
const destTxt = document.getElementById('destTxt');
const destLine = document.getElementById('destLine');
document.getElementById('estimate').addEventListener('click',()=>{
  const la = parseFloat(latI.value), lo = parseFloat(lonI.value);
  if(isNaN(la)||isNaN(lo)){ alert('è¯·å…ˆå¡«å†™/è§£æç›®çš„åœ°ç»çº¬åº¦'); return; }
  const km = Math.round(haversineKm(ORIGIN,{lat:la,lon:lo})*10)/10;
  document.getElementById('kmOut').textContent = km.toFixed(1);
  kmI.value = km; recalc(); updateSend();
  destDot.style.display = destTxt.style.display = destLine.style.display = 'block';
});

// Custom quick list
function renderCustomTags(){
  const box = document.getElementById('customTags');
  const list = loadCustom();
  box.innerHTML = '';
  list.forEach(d=>{
    const span = document.createElement('span');
    span.style.border='1px solid var(--border)'; span.style.borderRadius='8px'; span.style.padding='4px 8px'; span.style.marginRight='6px';
    span.textContent = d.label + ' âœ•';
    span.style.cursor='pointer';
    span.addEventListener('click',()=>{
      const next = list.filter(x=>x.label!==d.label);
      localStorage.setItem('ar_custom_dests', JSON.stringify(next));
      refreshCommon(); renderCustomTags();
    });
    box.appendChild(span);
  });
}
renderCustomTags();
document.getElementById('addCustom').addEventListener('click',()=>{
  const lab = document.getElementById('cLabel').value.trim();
  const la = parseFloat(document.getElementById('cLat').value);
  const lo = parseFloat(document.getElementById('cLon').value);
  if(!lab || isNaN(la) || isNaN(lo)) return;
  const list = loadCustom(); list.push({label:lab, lat:la, lon:lo});
  localStorage.setItem('ar_custom_dests', JSON.stringify(list));
  document.getElementById('cLabel').value=''; document.getElementById('cLat').value=''; document.getElementById('cLon').value='';
  refreshCommon(); renderCustomTags();
});

// Twint modal
const twModal = document.getElementById('twintModal');
document.getElementById('openTwint').addEventListener('click',()=>{ twModal.style.display='flex'; });
document.getElementById('closeTwint').addEventListener('click',()=>{ twModal.style.display='none'; });
twModal.addEventListener('click', (e)=>{ if(e.target===twModal) twModal.style.display='none'; });
</script>
</body>
</html>
